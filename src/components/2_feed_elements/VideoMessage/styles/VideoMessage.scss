.video-message {
  &__content {
    position: var(--chotto-videomessage-content-position, relative);
    max-width: var(--chotto-videomessage-content-max-width, 40%);
    border-radius: var(--chotto-videomessage-content-border-radius, 14px);
  }

  &__info-container {
    position: var(--chotto-videomessage-info-container-position, absolute);
    bottom: var(--chotto-videomessage-info-container-bottom, 4px);
    right: var(--chotto-videomessage-info-container-right, 8px);
    display: var(--chotto-videomessage-info-container-display, flex);
    align-items: var(--chotto-videomessage-info-container-align-items, center);
    column-gap: var(--chotto-videomessage-info-container-column-gap, 4px);
    border-radius: var(--chotto-videomessage-info-container-border-radius, 12px);
    padding: var(--chotto-videomessage-info-container-padding, 6px 10px);
    background-color: var(--chotto-videomessage-info-container-background-color, #e5e5e5);
    color: var(--chotto-videomessage-info-container-color, #262626);
  }

  &__download-button {
    position: var(--chotto-videomessage-download-button-position, absolute);
    left: var(--chotto-videomessage-download-button-left, 8px);
    bottom: var(--chotto-videomessage-download-button-bottom, 4px);
    display: var(--chotto-videomessage-download-button-display, flex);
    justify-content: var(--chotto-videomessage-download-button-justify-content, center);
    align-items: var(--chotto-videomessage-download-button-align-items, center);
    border: var(--chotto-videomessage-download-button-border, none);
    border-radius: var(--chotto-videomessage-download-button-border-radius, 12px);
    padding: var(--chotto-videomessage-download-button-padding, 6px 6px);
    background-color: var(--chotto-videomessage-download-button-background-color, #e5e5e5);
    cursor: var(--chotto-videomessage-download-button-cursor, pointer);

    span {
      color: var(--chotto-videomessage-download-button-span-color, #262626);
      font-size: var(--chotto-videomessage-download-button-span-font-size, 12px);
    }
  }

  &__views {
    display: var(--chotto-videomessage-views-display, flex);
    align-items: var(--chotto-videomessage-views-align-items, center);
    column-gap: var(--chotto-videomessage-views-column-gap, 4px);

    span {
      font-size: var(--chotto-videomessage-views-span-font-size, 12px);
    }

    p {
      font-size: var(--chotto-videomessage-views-p-font-size, 12px);
    }
  }

  &__time {
    font-size: var(--chotto-videomessage-time-font-size, 12px);
  }

  &__avatar {
    grid-row: var(--chotto-videomessage-avatar-grid-row, 1 / -1);
    align-self: var(--chotto-videomessage-avatar-align-self, end);
    margin-bottom: var(--chotto-videomessage-avatar-margin-bottom, 6px);
    object-fit: var(--chotto-videomessage-avatar-object-fit, cover);
    min-width: var(--chotto-videomessage-avatar-min-width, 40px);
    min-height: var(--chotto-videomessage-avatar-min-height, 40px);
    border-radius: var(--chotto-videomessage-avatar-border-radius, 50%);
  }

  &__video {
    object-fit: var(--chotto-videomessage-video-object-fit, cover);
    width: var(--chotto-videomessage-video-width, 100%);
    max-height: var(--chotto-videomessage-video-max-height, 500px);
    cursor: var(--chotto-videomessage-video-cursor, zoom-in);
  }

  &__subtext {
    font-size: var(--chotto-videomessage-subtext-font-size, 14px);
    color: var(--chotto-videomessage-subtext-color, #5F5F5F);
  }

  &__preview-button {
    position: var(--chotto-videomessage-preview-button-position, relative);
    display: var(--chotto-videomessage-preview-button-display, flex);
    flex-direction: var(--chotto-videomessage-preview-button-flex-direction, column);
  }

  &__menu-button {
    position: var(--chotto-videomessage-menu-button-position, absolute);
    background-color: var(--chotto-videomessage-menu-button-background-color, transparent);
    border: var(--chotto-videomessage-menu-button-border, none);
    transform: var(--chotto-videomessage-menu-button-transform, translateY(-50%));
    cursor: var(--chotto-videomessage-menu-button-cursor, pointer);
    transition: var(--chotto-videomessage-menu-button-transition, 0.2s);

    span {
      color: var(--chotto-videomessage-menu-button-span-color, #525252);
      font-size: var(--chotto-videomessage-menu-button-span-font-size, 23px);
    }

    &:hover span {
      color: var(--chotto-videomessage-menu-button-span-hover-color, #404040);
      transition: var(--chotto-videomessage-menu-button-span-hover-transition, 0.2s);
    }
  }

  &__context-menu {
    position: var(--chotto-videomessage-context-menu-position, absolute);
  }

  &__text-container {
    padding: var(--chotto-videomessage-text-container-padding, 6px 10px 6px 10px);
    border-radius: var(--chotto-videomessage-text-container-border-radius, 0 0 8px 8px);
    word-wrap: var(--chotto-videomessage-text-container-word-wrap, break-word);
    max-width: var(--chotto-videomessage-text-container-max-width, 25rem);

    p {
      white-space: var(--chotto-videomessage-text-container-p-white-space, pre-wrap);
      font-size: var(--chotto-videomessage-text-container-p-font-size, 14px);

      // Markdown форматирование
      :deep(strong) {
        font-weight: var(--chotto-videomessage-markdown-strong-font-weight, bold);
      }

      :deep(em) {
        font-style: var(--chotto-videomessage-markdown-em-font-style, italic);
      }

      :deep(u) {
        text-decoration: var(--chotto-videomessage-markdown-u-text-decoration, underline);
      }

      :deep(del),
      :deep(s) {
        text-decoration: var(--chotto-videomessage-markdown-del-text-decoration, line-through);
      }

      :deep(code) {
        background-color: var(--chotto-videomessage-markdown-code-bg, rgba(0, 0, 0, 0.1));
        padding: var(--chotto-videomessage-markdown-code-padding, 2px 4px);
        border-radius: var(--chotto-videomessage-markdown-code-border-radius, 3px);
        font-family: var(--chotto-videomessage-markdown-code-font-family, 'Courier New', monospace);
        font-size: var(--chotto-videomessage-markdown-code-font-size, 0.9em);
      }

      :deep(blockquote) {
        border-left: var(--chotto-videomessage-markdown-blockquote-border-left, 3px solid rgba(0, 0, 0, 0.2));
        padding-left: var(--chotto-videomessage-markdown-blockquote-padding-left, 10px);
        margin: var(--chotto-videomessage-markdown-blockquote-margin, 8px 0);
        font-style: var(--chotto-videomessage-markdown-blockquote-font-style, italic);
        color: var(--chotto-videomessage-markdown-blockquote-color, inherit);
      }

      // Убираем отступы у параграфов
      :deep(p) {
        margin: 0;
        display: inline;
      }

      :deep(p:not(:last-child)) {
        margin-bottom: var(--chotto-videomessage-markdown-p-margin-bottom, 4px);
        display: block;
      }
    }
  }

  &__link-preview {
    margin: var(--chotto-videomessage-link-preview-margin, 8px);
  }

  &__left,
  &__right {
    display: var(--chotto-videomessage-left-right-display, grid);
    grid-template-rows: var(--chotto-videomessage-left-right-grid-template-rows, min-content 1fr min-content);
    margin: var(--chotto-videomessage-left-right-margin, 0 0 10px 0);
  }

  &__left {
    grid-template-columns: var(--chotto-videomessage-left-grid-template-columns, min-content 1fr);

    .video-message__avatar {
      grid-column: var(--chotto-videomessage-left-avatar-grid-column, 1);
      margin-right: var(--chotto-videomessage-left-avatar-margin-right, 12px);
    }

    .video-message__subtext {
      grid-column: var(--chotto-videomessage-left-subtext-grid-column, 2);
      grid-row: var(--chotto-videomessage-left-subtext-grid-row, 1);
      margin: var(--chotto-videomessage-left-subtext-margin, 0 0 2px 10px);
    }

    .video-message__content {
      grid-column: var(--chotto-videomessage-left-content-grid-column, 2);
      background: var(--chotto-videomessage-left-bg, #d4d4d4);
    }

    .video-message__content.with-avatar-indent {
      margin-left: var(--chotto-videomessage-left-content-with-avatar-indent-margin-left, calc(var(--chotto-videomessage-avatar-min-width, 40px) + 12px));
    }

    .video-message__text-container {
      grid-column: var(--chotto-videomessage-left-text-container-grid-column, 2);
    }

    .video-message__menu-button {
      top: var(--chotto-videomessage-left-menu-button-top, 50%);
      right: var(--chotto-videomessage-left-menu-button-right, -40px);
    }

    .video-message__context-menu {
      top: var(--chotto-videomessage-left-context-menu-top, 50%);
      left: var(--chotto-videomessage-left-context-menu-left, 100%);
      margin-top: var(--chotto-videomessage-left-context-menu-margin-top, 20px);
    }
  }

  &__right {
    grid-template-columns: var(--chotto-videomessage-right-grid-template-columns, 1fr min-content);

    .video-message__avatar {
      grid-column: var(--chotto-videomessage-right-avatar-grid-column, 2);
      margin-left: var(--chotto-videomessage-right-avatar-margin-left, 12px);
    }

    .video-message__subtext {
      grid-column: var(--chotto-videomessage-right-subtext-grid-column, 1);
      grid-row: var(--chotto-videomessage-right-subtext-grid-row, 1);
      margin: var(--chotto-videomessage-right-subtext-margin, 0 10px 2px auto);
    }

    .video-message__content {
      grid-column: var(--chotto-videomessage-right-content-grid-column, 1);
      margin-left: var(--chotto-videomessage-right-content-margin-left, auto);
      background-color: var(--chotto-videomessage-right-bg, #a7f3d0);
    }

    .video-message__content.with-avatar-indent {
      margin-right: var(--chotto-videomessage-right-content-with-avatar-indent-margin-right, calc(var(--chotto-videomessage-avatar-min-width, 40px) + 12px));
    }

    .video-message__text-container {
      grid-column: var(--chotto-videomessage-right-text-container-grid-column, 1);
      margin-left: var(--chotto-videomessage-right-text-container-margin-left, 5px);
    }

    .video-message__menu-button {
      top: var(--chotto-videomessage-right-menu-button-top, 50%);
      left: var(--chotto-videomessage-right-menu-button-left, -40px);
    }

    .video-message__context-menu {
      top: var(--chotto-videomessage-right-context-menu-top, 50%);
      right: var(--chotto-videomessage-right-context-menu-right, 100%);
      margin-top: var(--chotto-videomessage-right-context-menu-margin-top, 20px);
    }
  }

  &__modal-video {
    width: var(--chotto-videomessage-modal-video-width, 100%);
    height: var(--chotto-videomessage-modal-video-height, auto);
    object-fit: var(--chotto-videomessage-modal-video-object-fit, contain);
    border-radius: var(--chotto-videomessage-modal-video-border-radius, 5px);
    max-height: var(--chotto-videomessage-modal-video-max-height, calc(90vh - 80px));
    max-width: var(--chotto-videomessage-modal-video-max-width, calc(95vw - 64px));
  }

}

.context-menu-enter-active {
  transition: var(--chotto-videomessage-context-menu-enter-active-transition, all 0.1s ease-out);
}

.context-menu-leave-active {
  transition: var(--chotto-videomessage-context-menu-leave-active-transition, all 0.1s cubic-bezier(1, 0.5, 0.8, 1));
}

.context-menu-enter-from,
.context-menu-leave-to {
  transform: var(--chotto-videomessage-context-menu-enter-from-transform, scale(0.9));
  opacity: var(--chotto-videomessage-context-menu-enter-from-opacity, 0);
}

.modal-fade-enter-active,
.modal-fade-leave-active {
  transition: var(--chotto-videomessage-modal-fade-enter-active-transition, opacity 0.2s ease);
}

.modal-fade-enter-from,
.modal-fade-leave-to {
  opacity: var(--chotto-videomessage-modal-fade-enter-from-opacity, 0);
}

.modal-fade-enter-to,
.modal-fade-leave-from {
  opacity: var(--chotto-videomessage-modal-fade-enter-to-opacity, 1);
}

.video-message:hover :deep(.message-reactions__add) {
  opacity: 1 !important;
  pointer-events: auto !important;
}

.video-message :deep(.message-sms-invite__text) {
  width: 100%;
  margin-left: 0;
  margin-right: 0;
}